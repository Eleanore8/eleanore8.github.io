---
layout: default
title:  "AMD、CMD、UMD"
date:   2020-01-05 17:50:00
des:  ""
motto:  ""
categories: 打包编译
---

# AMD和CMD
AMD 与 CMD 都是在页面初始化时加载完成所有模块。

### CMD

CMD 就近依赖, 是当模块被 require 时才会触发执行。

CMD加载完某个依赖模块后并不执行，只是下载而已，在所有依赖模块加载完成后进入主逻辑，遇到require语句的时候才执行对应的模块，这样模块的执行顺序和书写顺序是完全一致的。

### AMD

AMD 推崇依赖前置，在定义模块的时候就要声明其依赖的模块。

AMD 在加载模块完成后就会执行该模块，所有模块都加载执行完后会进入require的回调函数，执行主逻辑，这样的效果就是依赖模块的执行顺序和书写顺序不一定一致，看网络速度，哪个先下载下来，哪个先执行，但是主逻辑一定在所有依赖加载完成后才执行。

AMD用户体验好，因为没有延迟，依赖模块提前执行了，CMD性能好，因为只有用户需要的时候才执行。

### UMD

UMD (Universal Module Definition)，它可以通过运行时或者编译时让同一个代码模块在使用 CommonJs、CMD / AMD 的项目中运行，同一个 JavaScript 包在浏览器 / 服务端只需要遵守同一个写法就可以了。

UMD 先判断是否支持 Node 模块格式（exports是否存在），存在则使用 Node 模块格式，再判断是否支持 AMD（define是否存在），存在则使用 AMD 方式加载模块，如果前两个都不存在，则将模块公开到全局（window或global）。