---
layout: default
title:  "DNS"
date:   2020-04-10 17:50:00
des:  ""
motto:  ""
categories: 网络请求
---

DNS（Domain Name System，域名系统），
因特网上作为域名和IP地址相互映射的一个分布式数据库，
能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。
通过主机名，最终得到该主机名对应的IP地址的过程叫做域名解析（或主机名解析）。

### DNS解析

查找顺序： 

浏览器缓存--> 操作系统缓存--> 本地host文件 --> 路由器缓存--> ISP DNS缓存 --> 根域名服务器 --> 顶级域名服务器 --> 主域名服务器 --> 保存结果至缓存

hosts 文件：查看本地硬盘的 hosts 文件，看看其中有没有和这个域名对应的规则，如果有的话就直接使用 hosts 文件里面的 ip 地址。

ISP DNS缓存：互联网服务提供商（如中国电信）也会提供DNS服务，
比如比较著名的 114.114.114.114，
在本地查找不到的情况下，就会向ISP进行查询，ISP会在当前服务器的缓存内查找是否有记录，
如果有，则返回这个IP，若没有，则会开始向根域名服务器请求查询。

根域名服务器：根域名收到请求后会查看区域文件记录，
若无则将其管辖范围内顶级域名（如.com）服务器 IP 告诉 Local DNS 服务器，
Local DNS 服务器再向顶级域名服务器其查询

顶级域名服务器：顶级域名服务器收到请求后查看区域文件记录，若无则将其管辖范围内主域名服务器的 IP 地址告诉 Local DNS 服务器，以继续后续的查询

主域名服务器：主域名服务器接受到请求后查询自己的缓存，如果没有则进入下一级域名服务器进行查找，并重复该步骤直至找到正确纪录

本地域名服务器把返回的结果保存到缓存，以备下一次使用，同时将该结果返回，于是并可通过这个 IP 地址与 web 服务器建立通信连接。

![DNS解析](https://user-gold-cdn.xitu.io/2018/6/4/163c83c423b021ca?imageslim)

递归解析:

![递归解析](https://user-gold-cdn.xitu.io/2018/6/4/163c83c3e10e8cdc?imageslim)

迭代解析:

![迭代解析](https://user-gold-cdn.xitu.io/2018/6/4/163c83c3e16a7952?imageslim)

